---
import Section from "../components/Section.astro";
// @ts-ignore
import { calculateDate } from "calculating-date";

const currentDate = new Date().toISOString().split("T")[0];
const dateDiffGP = calculateDate("2022-08-29", currentDate)[0];
let gpYear = dateDiffGP["yearDiff"] as string;
gpYear = gpYear.replace(
  " Year",
  gpYear.startsWith("1") && !gpYear.startsWith("11") ? " Año" : " Años"
);
let gpMonth = dateDiffGP["monthDiff"] as string;
gpMonth = gpMonth.replace(
  " Month",
  gpMonth.startsWith("1") && !gpMonth.startsWith("11") ? " Mes" : " Meses"
);

const dateDiffTotal = calculateDate("2017-01-15", currentDate)[0];
let totalYears = dateDiffTotal["yearDiff"] as string;
totalYears = totalYears.replace(
  " Year",
  totalYears.startsWith("1") && !totalYears.startsWith("11") ? " Año" : " Años"
);

let totalMonths = dateDiffTotal["monthDiff"] as string;
totalMonths = totalMonths.replace(
  " Month",
  totalMonths.startsWith("1") && !totalMonths.startsWith("11")
    ? " Mes"
    : " Meses"
);

const jobs = [
  {
    años: "2022 - Actual",
    time: `${gpYear} ${gpMonth}`,
    company: "Garantiplus",
    position: "Desarrollador full stack",
    description:
      "Análisis y desarrollo de funcionalidades en .NET Core C#, gestión y mantenimiento de arquitectura. Conocimiento base en VueJs, Python y Docker. Desarrollo de RPAs en Python. Manejo de AWS y servicios como ec2, rout53, s3, lambda y otros. Presentación de avances usando scrum.",
  },
  {
    años: "2018 - 2022",
    time: "4 años y 7 meses",
    company: "Krom aduanal",
    position: "Desarrollador senior",
    description:
      "Desarrollo de aplicaciones de escritorio y web en VB.NET y ASP.X. Conocimiento de HTML5, CSS, JavaScript, jQuery. Manejo avanzado de SQL Server, uso de MySQL y MongoDB. Desarrollo de aplicaciones de escritorio en C# con Windows Forms. Gestión de proyectos: entrevistas, diagramas (BPMN, ER, casos), diseño. Reuniones y negociaciones con clientes. Generación y envío de reportes estándar y personalizados.",
  },
  {
    años: "2017 - 2018",
    time: "1 año",
    company: "SH&web",
    position: "Desarrollador junior",
    description:
      "Desarrollador de paneles de administración y creación de servicios web en PHP.",
  },
];
---

<!-- bg-[#3D3E42] -->
<Section id="trajectory" className="py-16 text-white">
  <!-- Header Section -->
  <div class="text-center mb-16">
    <h2 class="text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-[#FFC86B] to-yellow-300 bg-clip-text text-transparent">
      Trayectoria
    </h2>
    <div class="w-24 h-1 bg-gradient-to-r from-[#FFC86B] to-yellow-300 mx-auto rounded-full"></div>
  </div>

  <!-- Timeline Container -->
  <div class="max-w-6xl mx-auto relative">
    <!-- Línea vertical principal (desktop) -->
    <div class="hidden md:block absolute left-1/2 transform -translate-x-1/2 w-1 bg-gradient-to-b from-[#FFC86B] via-yellow-400 to-[#FFC86B] h-full rounded-full shadow-lg shadow-[#FFC86B]/30"></div>
    
    {
      jobs.map((job, index) => (
        <div class={`relative mb-12 ${index % 2 === 0 ? 'md:text-right md:pr-8' : 'md:text-left md:pl-8'}`}>
          <!-- Contenedor principal -->
          <div class={`flex flex-col md:flex-row items-center gap-6 ${index % 2 === 0 ? 'md:flex-row-reverse' : ''}`}>
            
            <!-- Indicador de tiempo (círculo) -->
            <div class="hidden md:flex absolute left-1/2 transform -translate-x-1/2 w-6 h-6 bg-[#FFC86B] rounded-full border-4 border-gray-900 shadow-lg shadow-[#FFC86B]/50 z-10">
              <div class="w-2 h-2 bg-white rounded-full m-auto animate-pulse"></div>
            </div>
            
            <!-- Card de trabajo -->
            <div class={`w-full md:w-5/12 ${index % 2 === 0 ? 'md:mr-auto' : 'md:ml-auto'}`}>
              <div class="group bg-gradient-to-br from-gray-800/60 to-gray-900/40 backdrop-blur-sm rounded-2xl p-6 md:p-8 border border-gray-700/30 shadow-2xl hover:shadow-[#FFC86B]/20 transition-all duration-300 hover:scale-105">
                
                <!-- Header del trabajo -->
                <div class="flex flex-col md:flex-row md:items-center gap-4 mb-6">
                  <div class="flex-1">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#FFC86B] mb-2 group-hover:text-yellow-300 transition-colors duration-300">
                      {job.company}
                    </h3>
                    <p class="text-lg md:text-xl text-gray-300 font-semibold mb-2">
                      {job.position}
                    </p>
                  </div>
                  
                  <!-- Fecha en badge -->
                  <div class="bg-[#FFC86B]/10 border border-[#FFC86B]/30 rounded-xl p-3 text-center min-w-fit">
                    <p class="text-[#FFC86B] font-bold text-sm md:text-base whitespace-nowrap">
                      {job.años}
                    </p>
                    <p class="text-yellow-300 text-xs md:text-sm">
                      {job.time}
                    </p>
                  </div>
                </div>
                
                <!-- Separador decorativo -->
                <div class="w-full h-px bg-gradient-to-r from-transparent via-[#FFC86B]/50 to-transparent mb-4"></div>
                
                <!-- Descripción -->
                <div class="text-gray-300 leading-relaxed">
                  <p class="text-sm md:text-base">
                    {job.description}
                  </p>
                </div>
                
                <!-- Elemento decorativo inferior -->
                <div class="flex justify-center mt-4">
                  <div class="w-12 h-1 bg-gradient-to-r from-[#FFC86B] to-yellow-400 rounded-full opacity-60 group-hover:opacity-100 transition-opacity duration-300"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      ))
    }
  </div>

  <!-- Resumen de experiencia -->
  <div class="max-w-4xl mx-auto mt-16">
    <div class="bg-gradient-to-r from-[#FFC86B]/10 to-yellow-400/10 backdrop-blur-sm rounded-2xl p-8 border border-[#FFC86B]/20 text-center">
      <div class="flex flex-col md:flex-row items-center justify-center gap-6">
        <div class="flex items-center gap-3">
          <div class="w-3 h-3 bg-[#FFC86B] rounded-full shadow-lg shadow-[#FFC86B]/50"></div>
          <span class="text-xl md:text-2xl text-gray-300">Experiencia total de trabajo</span>
        </div>
        <div class="text-3xl md:text-5xl font-bold text-[#FFC86B]">
          {totalYears} {totalMonths}
        </div>
      </div>
    </div>
  </div>
</Section>


